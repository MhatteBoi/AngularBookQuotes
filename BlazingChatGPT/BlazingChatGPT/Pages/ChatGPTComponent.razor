@page "/"
@using System.Text;
@using BlazingChatGPT.Services;

@inject BlazingChatGPT.Services.ChatGPTService ChatService

<PageTitle>Chat GPT</PageTitle>
<body>
    <EditForm Model="@AIRequest">
        <div class="searchArea">
            <button @onclick="GetAPIResponse"> Submit </button>
            <div class="inputDiv">
                <InputText class="form-control" @bind-Value="@AIRequest.Request" placeholder="Ask me anything.." />
            </div>
        </div>

        <div class="searchResult">
            <InputTextArea class="form-control" style="height:450px" @bind-Value="@AIRequest.Response" placeholder="AI will respond here..." readonly />
        </div>
    </EditForm>
</body>
@code{
    Message AIRequest = new();

    public async Task GetAPIResponse()
    {
        try
        {
            AIRequest.Response = await ChatService.GetResponse(AIRequest.Request);
        }
        catch (Exception)
        {
        }
    }

    public class Message
    {
        public string Request { get; set; }
        public string Response { get; set; }
    }
}